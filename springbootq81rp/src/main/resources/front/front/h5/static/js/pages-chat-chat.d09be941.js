(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-chat"],{"032b":function(t,e,i){var n=i("9176");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("a95f8190",n,!0,{sourceMap:!1,shadowMode:!1})},"0818":function(t,e,i){"use strict";var n=i("032b"),a=i.n(n);a.a},1865:function(t,e,i){"use strict";i.r(e);var n=i("5dab"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"5c52":function(t,e,i){"use strict";i.r(e);var n=i("7162"),a=i("1865");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("0818");var r,o=i("f0c5"),u=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"07f69a86",null,!1,n["a"],r);e["default"]=u.exports},"5dab":function(t,e,i){"use strict";var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var a=n(i("3b8d")),s={data:function(){return{inter:{},list:[],ask:"",showType:!1,askType:1}},onLoad:function(){this.intelligenceSave("主人，我是您的智能助手小搏，请问有什么可以帮您！");var t=this,e=setInterval((function(){t.init()}),3e3);this.inter=e},onUnload:function(){this.inter&&clearInterval(this.inter)},computed:{userid:function(){return uni.getStorageSync("userid")},baseUrl:function(){return this.$base.url}},methods:{showClick:function(){this.showType=!this.showType,this.scrollBottom()},changeImg:function(){var t=this;this.$api.upload((function(e){t.save("upload/"+e.file)}))},changeClick:function(){this.showType=!this.showType,this.askType=1==this.askType?2:1,console.log(this.askType),1==this.askType&&this.intelligenceSave("主人，我是您的智能助手小搏，请问有什么可以帮您！"),2==this.askType&&this.intelligenceSave("您好，在线客服很高兴为您服务！")},imgView:function(t){uni.previewImage({urls:[this.baseUrl+t]})},onSendTap:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.save();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),intelligenceGet:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.page("chathelper",{limit:1,ask:e});case 2:i=t.sent,0==i.code&&(i.data.list.length?this.intelligenceSave(i.data.list[0].reply):this.intelligenceSave("主人，小搏还不够聪明，无法理解您的意思！"));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),intelligenceSave:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.save("chat",{reply:e,userid:this.userid});case 2:this.ask="",this.init();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),save:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(){var e,i,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:null,t.next=3,this.$api.add("chat",{ask:e||this.ask});case 3:if(i=JSON.parse(JSON.stringify(e||this.ask)),this.ask="",this.init(),1!=this.askType||e){t.next=9;break}return this.$nextTick((function(){var t=this;setTimeout((function(){t.intelligenceGet(i)}),1e3)})),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),init:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.page("chat",{sort:"addtime",order:"asc",limit:1e3});case 2:for(i in e=t.sent,e.data.list)e.data.list[i].ask&&("upload"==e.data.list[i].ask.substr(0,6)?e.data.list[i].imgAsk=e.data.list[i].ask:e.data.list[i].imgAsk=""),e.data.list[i].reply&&("upload"==e.data.list[i].reply.substr(0,6)?e.data.list[i].imgReply=e.data.list[i].reply:e.data.list[i].imgReply="");this.list=e.data.list,this.scrollBottom();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),scrollBottom:function(){this.$nextTick((function(){setTimeout((function(){uni.pageScrollTo({scrollTop:99999,duration:0})}),200)}))}}};e.default=s},7162:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"cu-chat",style:{"padding-bottom":t.showType?"90px":"0"}},t._l(t.list,(function(e,n){return i("v-uni-view",{key:n},[e.ask?i("v-uni-view",{staticClass:"cu-item self"},[i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"content bg-green shadow"},[e.imgAsk?t._e():i("v-uni-text",[t._v(t._s(e.ask))]),e.imgAsk?i("v-uni-image",{staticStyle:{width:"120upx"},attrs:{src:t.baseUrl+e.imgAsk,mode:"widthFix"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.imgView(e.imgAsk)}}}):t._e()],1)],1),i("v-uni-view",{staticClass:"cu-avatar radius",staticStyle:{"background-image":"url(https://ossweb-img.qq.com/images/lol/web201310/skin/big107000.jpg)"}})],1):t._e(),e.reply?i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",staticStyle:{"background-image":"url(https://ossweb-img.qq.com/images/lol/web201310/skin/big143004.jpg)"}}),i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"content shadow"},[e.imgReply?t._e():i("v-uni-text",[t._v(t._s(e.reply))]),e.imgReply?i("v-uni-image",{staticStyle:{width:"120upx"},attrs:{src:t.baseUrl+e.imgReply,mode:"widthFix"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.imgView(e.imgReply)}}}):t._e()],1)],1)],1):t._e()],1)})),1),i("v-uni-view",{staticClass:"cu-bar foot input",style:{bottom:t.showType?"90px":"0"}},[i("v-uni-image",{staticClass:"jiahao",attrs:{src:"/static/jiahao.png",mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showClick.apply(void 0,arguments)}}}),i("v-uni-input",{staticClass:"solid-bottom",attrs:{"adjust-position":!1,focus:!1,maxlength:"300","cursor-spacing":"10"},model:{value:t.ask,callback:function(e){t.ask=e},expression:"ask"}}),i("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSendTap.apply(void 0,arguments)}}},[t._v("发送")])],1),t.showType?i("v-uni-view",{staticClass:"showView"},[i("v-uni-view",{staticClass:"showBox",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeImg.apply(void 0,arguments)}}},[t._v("选择文件")]),i("v-uni-view",{staticClass:"showBox",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeClick.apply(void 0,arguments)}}},[t._v("转"+t._s(1==t.askType?"人工服务":"智能回复"))])],1):t._e()],1)},s=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}))},9176:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-07f69a86]{padding-bottom:%?100?%}.jiahao[data-v-07f69a86]{width:%?50?%;margin:0 %?10?%}.showView[data-v-07f69a86]{width:100%;background:#fff;position:fixed;bottom:0;left:0}.showView .showBox[data-v-07f69a86]{width:100%;line-height:%?80?%;color:#fff;background:#007aff;text-align:center;font-size:%?28?%;margin:0 0 %?10?%}',""]),t.exports=e}}]);